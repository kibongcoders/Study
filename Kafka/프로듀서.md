프로듀서는 카프카 브로커로 데이터를 전송할 때 내부적으로 파티셔너, 배치 생성 단계를 거친다.

ProducerRecord 라는 클래스를 통해 인스턴스를 생성 가능
기본적인 ProducerRecord 인스턴스만 사용한다면 필수 파라미터인 토픽과 메세지값은 설정해야함
만약 거기서 더 추가 하고 싶다면 오버로딩해서 파티션번호 직접 부여, 타임스탬프 설정 ,메세지 키 설정 가능

KafkaProducer 인스턴스가 send() 메서드를 호출하면 ProducerRecord는 Partitioner에서 토픽의 어느 파티션으로 전송될 것인지 정해진다.
기본값은 DefaultPartitioner -> 설정 가능
구분된 레코드는 Accumulator에 데이터를 쌓아놓고 발송
쌓인 데이터는 배치로 묶여서 전송되기에 프로듀서의 처리량을 샹상시키는데 상당한 도움을 준다.

프로듀서 API 사용시 UniformStickyPartitioner 와 RoundRobinPartitioner 2개의 파티션을 제공
기본은 UniformStickyPartitioner 

둘 다 메세지 키의 해시값과 파티션을 매칭하여 데이터를 전송한다는 점은 동일 하나
UniformStickyPartitioner가 RoundRobinPartitioner의 단점을 개선한 파티션이다.

### UniformStickyPartitioner

프로듀서 동작 특화 -> 높은 처리량과 낮은 리소스 사용률을 가진다.

RoundRobinPartitioner은 들어오는 대로 파티션을 순회하면서 전송하기 때문에 배치로 묶이는 빈도가 적다.

<span style="color:#f1c40f">될 수 있으면 많은 데이터가 배치로 묶여 전송되어야 성능 향상</span> 이 되므로UniformStickyPartitioner가 기본 값이 되었다.

### Partition Interface

카프카 클라이언트 라이브러리는 Partitioner 인터페이스를 제공하고 상속받아
메세지 키 또는 메시지 값에 따른 파티션 지정로직을 적용 가능하다.

## 프로듀서 주요 옵션

### 필수 옵션

- bootstrap.servers : 프로듀서가 데이터를 전송할 대상(카프카 클러스터에 속한 브로커의 호스트 이름:포트)을 한개 이상 작성한다.
    2개 이상 작성시 이슈가 발생하더라도 접속하는데 이슈가 없도록 설정 가능하다.
- key.serializer : 레코드의 메시지 키를 직렬화 하는 클래스를 지정
- value.serializer : 레코드의 메시지 값을 직렬화 하는 클래스 지정

### 선택 옵션

- acks ; 





